<html ng-app="AdminModule">
<head>

<title>Debiki â€” for the fruitful conversations</title>
<meta content="" name="description">
<meta content="" name="keywords">
<meta name="viewport" content="initial-scale=1.0, minimum-scale=0.01">
<meta charset="utf-8">

<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Bree+Serif">
<link rel="stylesheet" href="http://www.debiki.com/themes/assets/twitter-bootstrap-2.0.3-wip.css">
<link rel="stylesheet" href="/-/res/jquery-ui/jquery-ui-1.8.16.custom.css">
<link rel="stylesheet" href="/-/res/combined-debiki.css">
<link rel="stylesheet" href="http://www.debiki.com/www-debiki-com.css">
<link rel="stylesheet" href="/-/res/debiki-spa-admin.css">
<!--[if IE 7]>
<link rel="stylesheet" href="https://localhost:9000/-/res/debiki-lift-ie7.css"/>
<![endif]-->

<script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.5.3/modernizr.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.js"></script>
<script>
  var debiki = { v0: { util: {} }, internal: { $: jQuery } };
  debiki.scriptLoad = $.Deferred();
  Modernizr.load({
    test: Modernizr.touch,
    yep: '/-/res/combined-debiki-touch.js',
    nope: '/-/res/combined-debiki-desktop.js',
  });
</script>
<script src="/-/res/debiki-spa-common.js"></script>
<!--<script src="/-/res/debiki-spa-admin-server-mock.js"></script>-->
<script src="/-/res/debiki-spa-admin.js"></script>

</head>
<body>
<div data-replace='#content'>
  <h1>Admin Page</h1>
  <div id='admin-container'>
    <div>
      <div id='details'>
        <ul class="nav nav-tabs">
          <li class='active'><a href="#events-tab" data-toggle="tab">Events</a></li>
          <li><a href="#pages-tab" data-toggle="tab">Pages</a></li>
          <li><a href="#users-tab" data-toggle="tab">Users</a></li>
        </ul>

        <div class="tab-content">
          <div ng-controller='ActionListCtrl' class='tab-pane active'
                id='events-tab'>
            <div class='details-list-buttons'>
              <!--<a id='btn-view-post' class='btn' ng-show='oneRowChecked'>View</a>-->
              <a id='btn-approve-post' class='btn' ng-show='manyRowsChecked'>Approve</a>
              <a id='btn-reject-post' class='btn' ng-show='manyRowsChecked'>Reject</a>
              <!-- <a class='btn'>Edit</a>
              <a class='btn'>Subscribe</a>
              <a class='btn'>!Spam</a>
              <a class='btn'>#Delete</a>
              <a class='btn'>Sort</a> -->
            </div>
            <table class='table -table-bordered -table-striped'>
              <thead>
                <tr>
                  <th class='row-selector'>
                    <label>
                      <input type='checkbox' ng-change='toggleAllChecked()'
                      ng-model='allSelected'>
                    </label>
                  </th>
                  <th>What</th>
                  <th>Author</th>
                  <th>Date</th>
                  <th>Text</th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat='action in actionList'>
                  <td class='row-selector'>
                    <label>
                      <input type='checkbox' ng-model='action.selected'
                          ng-click='onRowCheckedChange()'>
                    </label>
                  </td>
                  <td class='action-what'>
                    <div>
                      <a target='_blank' class='action-description' href='{{action.url}}'>{{action.description}}</a>
                      <a class='inline-action approve-action' ng-click='approve(action)' ng-show='action.showApproveBtn'>Approve</a>
                      <a class='inline-action reject-action' ng-click='reject(action)' ng-show='action.showRejectBtn'>Reject</a>
                      <a class='inline-action delete-action' ng-click='delete(action)' ng-show='action.showDeleteBtn'>Delete</a>
                      <span class='inline-message'>{{action.inlineMessage}}</span>
                    </div>
                    <a target='_blank' class='action-path' href='{{action.url}}'>{{action.pagePath}}</a>
                  </td>
                  <td><a target='_blank' href='#!/user/{{action.authorId}}'>{{action.authorDisplayName}}</a></td>
                  <td>{{action.cdati.replace('T', ' ')}}</td>
                  <td class='post-text'>{{action.text}}</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div ng-controller='PathsCtrl' class='tab-pane' id='pages-tab'>

            <div>
              <a id='btn-??' class='btn' href='/?create-page' target='_blank'>Create page</a>
            </div>

            <div id='page-tree-container'>
              <label>Filter paths: <input ng-model="pathFilterText"/></label>
              <ol id='page-tree' class='{{"full-paths-"+ showFullPaths}}'>
                <li ng-repeat="path in paths | filterProp:'value':pathFilterText"
                    class='{{isFolderOrPageClass(path) + " open-" + path.open + " hide-count-" + path.hideCount + " Xpath-depth-" + path.depth + " included-" + path.included}}'>
                  <label class="checkbox">
                    <input type="checkbox"
                       ng-model="path.included"
                       ng-change="updateSelectedPaths()" />
                  </label>
                  <a ng-click='openClose(path)' class='open-close-path' href='#'>{{path.displayPath}}</a>
                  <div ng-switch='isPage(path)' class='path-info'>
                    <div ng-switch-when='true' class='page-info'>
                      Title: <a href='{{path.value}}' target='_blank'>{{path.title}}</a><br>
                      Author: <a href="#">{{path.authors}}</a><br>
                      Published: <span>2012-05-03 22:40</span>
                      <!-- <div class='actions'>
                        <a href='{{path.value + "?move-page"}}'>Move</a>
                        <a href='{{path.value + "?rename-page"}}'>Rename</a>
                      </div> -->
                    </div>
                    <!-- <div ng-switch-default class='folder-info'>
                      <div class='actions'>
                        <a>Create page</a>
                        <a>Move folder</a>
                      </div>
                    </div> -->
                  </div>
                </li>
              </ol>
            </div>
          </div>

          <div ng-controller='UserListCtrl' class='tab-pane' id='users-tab'>
            <div>
              <a class='btn'>Contact</a>
              <a class='btn'>Subscribe</a>
              <a class='btn'>Rename</a>
              <a class='btn'>Block</a>
              <a class='btn'>Sort</a>
            </div>
            <table class='table'>
              <thead>
                <tr>
                  <th class='row-selector'>
                    <label>
                      <input type='checkbox' ng-change='toggleAllChecked()'
                      ng-model='allSelected'>
                    </label>
                  </th>
                  <th>Name</th>
                  <th>Roles</th>
                  <th>Action Count</th>
                  <th>Email</th>
                  <th>Location</th>
                  <th>IPs</th>
                  <th>First Login</th>
                  <th>Last Login</th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat='user in userList'>
                  <td class='row-selector'>
                    <label>
                      <input type='checkbox' ng-model='user.selected'
                          ng-click='onRowCheckedChange()'>
                    </label>
                  </td>
                  <td><a target='_blank'>{{user.name}}</a></td>
                  <td><a target='_blank'>[todo]</a></td>
                  <td><a target='_blank'>[todo]</a></td>
                  <td><a target='_blank'>{{user.email || ''}}</a></td>
                  <td><a target='_blank'>{{user.country || user.location}}</a></td>
                  <td><a target='_blank'>[todo]</a></td>
                  <td><a target='_blank'>{{user.ctime.replace('T', ' ')}}</a></td>
                  <td><a target='_blank'>{{user.lastLoginTime.replace('T', ' ')}}</a></td>
                </tr>
              </tbody>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id='debiki-page'></div>
</div>
</body>
</html>
<!-- vim: fdm=marker et ts=2 sw=2 fo=tcqwn list
-->
